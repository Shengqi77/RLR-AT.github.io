
<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>DiffIR2VR-Zero</title>

    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:image" content="https://jimmycv07.github.io/DiffIR2VR_web/img/pipeline.jpg">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="1296">
    <meta property="og:image:height" content="840">
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://jimmycv07.github.io/DiffIR2VR_web/"/>
    <meta property="og:title" content="DiffIR2VR-Zero: Zero-Shot Video Restoration with Diffusion-based Image Restoration Models" />
    <meta property="og:description" content="This paper introduces a method for zero-shot video restoration using pre-trained image restoration diffusion models. Traditional video restoration methods often need retraining for different settings and struggle with limited generalization across various degradation types and datasets. Our approach uses a hierarchical token merging strategy for keyframes and local frames, combined with a hybrid correspondence mechanism that blends optical flow and feature-based nearest neighbor matching (latent merging). We show that our method not only achieves top performance in zero-shot video restoration but also significantly surpasses trained models in generalization across diverse datasets and extreme degradations (8$\times$ super-resolution and high-standard deviation video denoising). We present evidence through quantitative metrics and visual comparisons on various challenging datasets. Additionally, our technique works with any 2D restoration diffusion model, offering a versatile and powerful tool for video enhancement tasks without extensive retraining. This research leads to more efficient and widely applicable video restoration technologies, supporting advancements in fields that require high-quality video output." />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="DiffIR2VR-Zero: Zero-Shot Video Restoration with Diffusion-based Image Restoration Models" />
    <meta name="twitter:description" content="This paper introduces a method for zero-shot video restoration using pre-trained image restoration diffusion models. Traditional video restoration methods often need retraining for different settings and struggle with limited generalization across various degradation types and datasets. Our approach uses a hierarchical token merging strategy for keyframes and local frames, combined with a hybrid correspondence mechanism that blends optical flow and feature-based nearest neighbor matching (latent merging). We show that our method not only achieves top performance in zero-shot video restoration but also significantly surpasses trained models in generalization across diverse datasets and extreme degradations (8$\times$ super-resolution and high-standard deviation video denoising). We present evidence through quantitative metrics and visual comparisons on various challenging datasets. Additionally, our technique works with any 2D restoration diffusion model, offering a versatile and powerful tool for video enhancement tasks without extensive retraining. This research leads to more efficient and widely applicable video restoration technologies, supporting advancements in fields that require high-quality video output." />
    <meta name="twitter:image" content="https://jimmycv07.github.io/DiffIR2VR_web/img/pipeline.jpg" />


<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>0️⃣</text></svg>">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.8.0/codemirror.min.css">
    <link rel="stylesheet" href="css/app.css">
	<link rel="stylesheet" href="css/fontawesome.all.min.css">
	<link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

    <link rel="stylesheet" href="css/bootstrap.min.css">
    
    <link rel="stylesheet" href="css/bulma-carousel.min.css">
    <link rel="stylesheet" href="css/bulma-slider.min.css">

    <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-8ZERS5BVPS"></script>
  <script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-8ZERS5BVPS');
  </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.8.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.3/clipboard.min.js"></script>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <script defer src="js/fontawesome.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

    <script src="js/app.js"></script>
    <script src="js/video_comparison.js"></script>
    <script src="js/bulma-carousel.js"></script>
    <script src="js/bulma-slider.min.js"></script>
    <script src="js/index.js"></script>
</head>

<body style="padding: 1%; width: 100%">
    <div class="container" style="max-width: 1500px; margin: auto;" id="main">
        <div class="row">
            <h2 class="col-md-12 text-center">
                <b>DiffIR2VR-Zero</b>:<br>Zero-Shot Video Restoration with Diffusion-based Image Restoration Models</br> 
                <!-- <small>
                ICCV 2023 (Oral Presentation, Best Paper Finalist)
                </small> -->
            </h2>
        </div>
        <div class="row">
            <div class="col-md-12 text-center">
                <ul class="list-inline">
                    <li>
                        <a href="">
                            Changhan Yeh
                        </a><sup>1</sup>
                    </li>
                    <li>
                        <a href="https://linjohnss.github.io/">
                            Chin-Yang Lin
                        </a><sup>1</sup>
                    </li>
                    <li>
                        <a href="https://lightchaserx.github.io/">
                            Zhixiang Wang
                        </a><sup>2</sup>
                    </li>
                    <li>
                        <a href="https://chiweihsiao.github.io/">
                            Chi-Wei Hsiao
                        </a><sup>3</sup>
                    </li>
                    <li>
                        <a href="https://koi953215.github.io/">
                            Ting-Hsuan Chen
                        </a><sup>1</sup>
                    </li>
                    <li>
                        <a href="https://yulunalexliu.github.io/">
                            Yu-Lun Liu
                        </a><sup>1</sup>
                    </li>
                    </br><sup>1</sup>National Yang Ming Chiao Tung University&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<sup>2</sup>University of Tokyo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<sup>3</sup>MediaTek Inc.
                </ul>
            </div>
        </div>


        <div class="row">
                <div class="col-md-6 col-md-offset-3 text-center">
                    <ul class="nav nav-pills nav-justified">
                        <li>
                            <a href="https://arxiv.org/abs/2304.06706">
                            <image src="img/narcan_paper_image.jpg" height="60px">
                                <h4><strong>Paper</strong></h4>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.youtube.com/watch?v=xrrhynRzC8k">
                            <image src="img/youtube_icon.png" height="60px">
                                <h4><strong>Video</strong></h4>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/jonbarron/camp_zipnerf">
                            <image src="img/github.png" height="60px">
                                <h4><strong>Code [coming soon]</strong></h4>
                            </a>
                        </li>
                    </ul>
                </div>
        </div>

        <section class="hero is-light is-small">
            <div class="hero-body">
              <div class="container">
                <div id="results-carousel" class="carousel results-carousel">

                    <div class="item item-CVAI-2828RAO2_CRA32">
                        <div class="video-compare-container" id="CVAI-2828RAO2_CRA32Div" style="width: 100%;">
                            <video class="video" id="CVAI-2828RAO2_CRA32" loop playsinline autoPlay muted src="videos/SRx4_horsejump-high_teaser.mp4" onplay="resizeAndPlay(this)" width="100%"></video>
                            <canvas height=0 class="videoMerge" id="CVAI-2828RAO2_CRA32Merge" style="width: 100%;"></canvas>
                        </div>
                    </div>
                    
                    <div class="item">
                        <div class="video-compare-container" id="CVAI-2840RAO10_CAU32Div" style="width: 100%;">
                            <video class="video" id="CVAI-2840RAO10_CAU32" loop playsinline autoPlay muted src="videos/noise_75_003_teaser.mp4" onplay="resizeAndPlay(this)" width="100%"></video>
                            <canvas height=0 class="videoMerge" id="CVAI-2840RAO10_CAU32Merge" style="width: 100%;"></canvas>
                        </div>
                    </div>

                    <div class="item item-CVAI-2829RAO9_CRA37">
                        <div class="video-compare-container" id="CVAI-2829RAO9_CRA37Div" style="width: 100%;">
                            <video class="video" id="CVAI-2829RAO9_CRA37" loop playsinline autoPlay muted src="videos/SRx4_car-roundabout_teaser.mp4" onplay="resizeAndPlay(this)" width="100%"></video>
                            <canvas height=0 class="videoMerge" id="CVAI-2829RAO9_CRA37Merge" style="width: 100%;"></canvas>
                        </div>
                    </div>

                    <div class="item">
                        <div class="video-compare-container" id="CVAI-2847LAO1_CRA32Div" style="width: 100%;">
                            <video class="video" id="CVAI-2847LAO1_CRA32" loop playsinline autoPlay muted src="videos/noise_75_028_teaser.mp4" onplay="resizeAndPlay(this)" width="100%"></video>
                            <canvas height=0 class="videoMerge" id="CVAI-2847LAO1_CRA32Merge" style="width: 100%;"></canvas>
                        </div>
                    </div>

                    <div class="item item-CVAI-2829RAO14_CAU37">
                        <div class="video-compare-container" id="CVAI-2829RAO14_CAU37Div" style="width: 100%;">
                            <video class="video" id="CVAI-2829RAO14_CAU37" loop playsinline autoPlay muted src="videos/SRx4_car-shadow_teaser.mp4" onplay="resizeAndPlay(this)" width="100%"></video>
                            <canvas height=0 class="videoMerge" id="CVAI-2829RAO14_CAU37Merge" style="width: 100%;"></canvas>
                        </div>
                    </div>

                    <div class="item">
                        <div class="video-compare-container" id="CVAI-2855LAO26_CRA31Div" style="width: 100%;">
                            <video class="video" id="CVAI-2855LAO26_CRA31" loop playsinline autoPlay muted src="videos/noise_75_002_teaser.mp4" onplay="resizeAndPlay(this)" width="100%"></video>
                            <canvas height=0 class="videoMerge" id="CVAI-2855LAO26_CRA31Merge" style="width: 100%;"></canvas>
                        </div>
                    </div>

                    <div class="item item-CVAI-2832RAO7_CAU29">
                        <div class="video-compare-container" id="CVAI-2832RAO7_CAU29Div" style="width: 100%;">
                            <video class="video" id="CVAI-2832RAO7_CAU29" loop playsinline autoPlay muted src="videos/SRx4_breakdance_teaser.mp4" onplay="resizeAndPlay(this)" width="100%"></video>
                            <canvas height=0 class="videoMerge" id="CVAI-2832RAO7_CAU29Merge" style="width: 100%;"></canvas>
                        </div>
                    </div>

                    <div class="item">
                        <div class="video-compare-container" id="CVAI-2858LAO51_CRA9Div" style="width: 100%;">
                            <video class="video" id="CVAI-2858LAO51_CRA9" loop playsinline autoPlay muted src="videos/noise_75_004_teaser.mp4" onplay="resizeAndPlay(this)" width="100%"></video>
                            <canvas height=0 class="videoMerge" id="CVAI-2858LAO51_CRA9Merge" style="width: 100%;"></canvas>
                        </div>
                    </div>

                </div>
              </div>
            </div>
        </section>

        <div class="row">
            <div class="col-md-12 text-center">
                <b>DiffIR2VR-Zero</b> is a zero-shot video restoration method using pre-trained diffusion models, effectively handling up to 8x super-resolution and denoising without retraining.
			</div>
        </div><br>

        <!-- <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <video id="v0" width="100%" autoplay loop muted controls>
                  <source src="img/teaser.mp4" type="video/mp4" />
                </video>
						</div>
        </div> -->


        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    Abstract
                </h3>
                <p class="text-justify">
                    This paper introduces a method for zero-shot video restoration using pre-trained image restoration diffusion models. Traditional video restoration methods often need retraining for different settings and struggle with limited generalization across various degradation types and datasets. Our approach uses a hierarchical token merging strategy for keyframes and local frames, combined with a hybrid correspondence mechanism that blends optical flow and feature-based nearest neighbor matching (latent merging). We show that our method not only achieves top performance in zero-shot video restoration but also significantly surpasses trained models in generalization across diverse datasets and extreme degradations (8$\times$ super-resolution and high-standard deviation video denoising). We present evidence through quantitative metrics and visual comparisons on various challenging datasets. Additionally, our technique works with any 2D restoration diffusion model, offering a versatile and powerful tool for video enhancement tasks without extensive retraining. This research leads to more efficient and widely applicable video restoration technologies, supporting advancements in fields that require high-quality video output.
                </p>
            </div>
        </div>

        <br>
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    Video super-resolution
                </h3>
                <image src="img/motivation.jpg" width=100% style="display: block; margin: auto;"></image>
                <p class="text-justify">
                    (a) Traditional regression-based methods such as FMA-Net are limited to the training data domain and tend to produce blurry results when encountering out-of-domain inputs. (b) Although applying image-based diffusion models such as DiffBIR to individual frames can generate realistic details, these details often lack consistency across frames. (c) Our method leverages an image diffusion model to restore videos, achieving both realistic and consistent results <i>without</i> any additional training.
                </p>
            </div>
        </div>

        <br>
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    Ours proposed zero-shot video restoration
                </h3>
                <image src="img/pipeline.jpg" width=100% style="display: block; margin: auto;"></image>
                <p class="text-justify">
                    We process low-quality (LQ) videos in batches using a diffusion model, with a keyframe randomly sampled within each batch. (a) At the beginning of the diffusion denoising process, hierarchical latent warping provides rough shape guidance both globally, through latent warping between keyframes, and locally, by propagating these latents within the batch. (b) Throughout most of the denoising process, tokens are merged before the self-attention layer. For the downsample blocks, optical flow is used to find the correspondence between tokens, and for the upsample blocks, cosine similarity is utilized. This hybrid flow-guided, spatial-aware token merging accurately identifies correspondences between tokens by leveraging both flow and spatial information, thereby enhancing overall consistency at the token level.
                </p>
            </div>
        </div>




        <br>
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    Qualitative comparisons on video super-resolution
                </h3><br>

                <div class="text-center ">
                    <ul class="nav nav-pills center-pills">
                        <li class="method-pill active" data-value="lq"
                            onclick="selectCompVideo(this, activeScenePill)"><a>Input</a></li>
                        <li class="method-pill" data-value="vidtome"
                            onclick="selectCompVideo(this, activeScenePill)"><a>VidToMe</a></li>
                        <li class="method-pill" data-value="FMA-Net"
                            onclick="selectCompVideo(this, activeScenePill)"><a>FMA-Net</a></li>
                        <li class="method-pill" data-value="SDx4_perframe"
                            onclick="selectCompVideo(this, activeScenePill)"><a>SD x4 upscaler</a></li>
                        <li class="method-pill" data-value="DiffBIR_perframe"
                            onclick="selectCompVideo(this, activeScenePill)"><a>DiffBIR</a></li>
                    </ul>
                </div>

                <script>
                    activeMethodPill = document.querySelector('.method-pill.active-pill');
                    activeScenePill = document.querySelector('.scene-pill.active-pill');
                    activeModePill = document.querySelector('.mode-pill.active-pill');
                </script>
                
                <div class="text-center">
                    <div class="video-compare-container" id="compareDiv" style="width: 100%;">
                        <video class="video" id="compare" loop playsinline autoPlay muted src="videos/SRx4_blackswan_lq_vs_ours.mp4" onplay="resizeAndPlay(this)" width="100%"></video>
                        <canvas height=0 class="videoMerge" id="compareMerge" style="width: 100%;"></canvas>
                    </div>
                    <!-- <div class="video-container">
                        <video class="video" style="height: 280px; max-width: 100%;" m id="compVideo0" loop playsinline autoplay muted>
                            <source src="videos/comparison/mipnerf360_bonsai_zipnerf_vs_ours_rgb.mp4" />
                        </video>
                        <video class="video" style="height: 280px; max-width: 100%;" id="compVideo1" loop playsinline autoplay muted hidden>
                            <source src="videos/comparison/mipnerf360_bonsai_zipnerf_vs_ours_depth.mp4" />
                        </video>
                    </div> -->
                    <div class="text-center" style="color: black;" id="mode-pills">
                        <div class="btn-group btn-group-sm">
                            <span class="btn btn-primary mode-pill active" data-value="SRx4"
                                onclick="selectCompVideo(activeMethodPill, activeScenePill, null, this)">
                                x4
                            </span>
                            <span class="btn btn-primary mode-pill" data-value="SRx8"
                                onclick="selectCompVideo(activeMethodPill, activeScenePill, null, this)">
                                x8
                            </span>
                        </div>
                    </div>


                    <br>
                    <p class="text-justify" style="text-align: center;">
                        Baseline method (left) vs DiffIR2VR-Zero (right). Try selecting different methods and scenes!
                    </p>
                    <!-- <script>
                        video0 = document.getElementById("compVideo0");
                        video1 = document.getElementById("compVideo1");
                        video0.addEventListener('loadedmetadata', function() {
                            if (activeVidID == 0 && select){
                                video0.play();
                                // print video size
                                console.log(video0.videoWidth, video0.videoHeight);
                                video0.hidden = false;
                                video1.hidden = true;
                            }
                        });
                        video1.addEventListener('loadedmetadata', function() {
                            if (activeVidID == 1 && select){
                                video1.play();
                                // print video size
                                console.log(video1.videoWidth, video1.videoHeight);
                                video0.hidden = true;
                                video1.hidden = false;
                            }
                        });
                    </script> -->
                    
                    <div class="pill-row scene-pills" id="scene-pills">
                        <span class="pill scene-pill active" data-value="blackswan" onclick="selectCompVideo(activeMethodPill, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/blackswan_thumbnail.jpg" alt="DTU/scan31" width="64">
                        </span>
                        <span class="pill scene-pill" data-value="goat" onclick="selectCompVideo(activeMethodPill, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/goat_thumbnail.jpg" alt="DTU/scan45" width="64">
                        </span>
                        <span class="pill scene-pill" data-value="kite-surf" onclick="selectCompVideo(activeMethodPill, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/kite-surf_thumbnail.jpg" alt="LLFF/fern" width="64">
                        </span>
                        <span class="pill scene-pill" data-value="car-shadow" onclick="selectCompVideo(activeMethodPill, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/car-shadow_thumbnail.jpg" alt="LLFF/horns" width="64">
                        </span>
                        <span class="pill scene-pill" data-value="parkour" onclick="selectCompVideo(activeMethodPill, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/parkour_thumbnail.jpg" alt="Re10K/sofa" width="64">
                        </span>
                        <span class="pill scene-pill" data-value="breakdance" onclick="selectCompVideo(activeMethodPill, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/breakdance_thumbnail.jpg" alt="Re10K/living room" width="64">
                        </span>
                        <span class="pill scene-pill" data-value="drift-chicane" onclick="selectCompVideo(activeMethodPill, this, 6)">
                            <img class="thumbnail-img" src="thumbnails/drift-chicane_thumbnail.jpg" alt="CO3D/bench" width="64">
                        </span>
                        <span class="pill scene-pill" data-value="bmx-trees" onclick="selectCompVideo(activeMethodPill, this, 6)">
                            <img class="thumbnail-img" src="thumbnails/bmx-trees_thumbnail.jpg" alt="CO3D/plant" width="64">
                        </span>
                    </div>

                    <script>
                        activeMethodPill = document.querySelector('.method-pill.active-pill');
                        activeScenePill = document.querySelector('.scene-pill.active-pill');
                        activeModePill = document.querySelector('.mode-pill.active-pill');
                    </script>
                </div>
            </div>
        </div>
        <br>




        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    Qualitative comparisons on video denoising
                </h3><br>

                <div class="text-center ">
                    <ul class="nav nav-pills center-pills">
                        <li class="method-pill-denoising active" data-value="lq"
                            onclick="selectCompVideoDenoising(this, activeScenePillDenoising)"><a>Input</a></li>
                        <li class="method-pill-denoising" data-value="VRT"
                            onclick="selectCompVideoDenoising(this, activeScenePillDenoising)"><a>VRT</a></li>
                        <li class="method-pill-denoising" data-value="Shift-Net"
                            onclick="selectCompVideoDenoising(this, activeScenePillDenoising)"><a>Shift-Net</a></li>
                        <li class="method-pill-denoising" data-value="vidtome"
                            onclick="selectCompVideoDenoising(this, activeScenePillDenoising)"><a>VidToMe</a></li>
                        <li class="method-pill-denoising" data-value="DiffBIR_perframe_better"
                            onclick="selectCompVideoDenoising(this, activeScenePillDenoising)"><a>DiffBIR</a></li>
                    </ul>
                </div>

                <script>
                    activeMethodPillDenoising = document.querySelector('.method-pill-denoising.active-pill');
                    activeScenePillDenoising = document.querySelector('.scene-pill-denoising.active-pill');
                    activeModePillDenoising = document.querySelector('.mode-pill-denoising.active-pill');
                </script>
                
                <div class="text-center">
                    <div class="video-compare-container" id="compare_denoisingDiv" style="width: 100%;">
                        <video class="video" id="compare_denoising" loop playsinline autoPlay muted src="videos/noise_75_022_lq_vs_ours.mp4" onplay="resizeAndPlay(this)" width="100%"></video>
                        <canvas height=0 class="videoMerge" id="compare_denoisingMerge" style="width: 100%;"></canvas>
                    </div>
                    <div class="text-center" style="color: black;" id="mode-pills-denoising">
                        Noise level:
                        <div class="btn-group btn-group-sm">
                            <span class="btn btn-primary mode-pill-denoising active" data-value="noise_75"
                                onclick="selectCompVideoDenoising(activeMethodPillDenoising, activeScenePillDenoising, null, this)">
                                75
                            </span>
                            <span class="btn btn-primary mode-pill-denoising" data-value="noise_100"
                                onclick="selectCompVideoDenoising(activeMethodPillDenoising, activeScenePillDenoising, null, this)">
                                100
                            </span>
                            <span class="btn btn-primary mode-pill-denoising" data-value="noise_random_50100"
                                onclick="selectCompVideoDenoising(activeMethodPillDenoising, activeScenePillDenoising, null, this)">
                                Random
                            </span>
                        </div>
                    </div>


                    <br>
                    <p class="text-justify" style="text-align: center;">
                        Baseline method (left) vs DiffIR2VR-Zero (right). Try selecting different methods and scenes!
                    </p>
                    <!-- <script>
                        video0 = document.getElementById("compVideo0");
                        video1 = document.getElementById("compVideo1");
                        video0.addEventListener('loadedmetadata', function() {
                            if (activeVidID == 0 && select){
                                video0.play();
                                // print video size
                                console.log(video0.videoWidth, video0.videoHeight);
                                video0.hidden = false;
                                video1.hidden = true;
                            }
                        });
                        video1.addEventListener('loadedmetadata', function() {
                            if (activeVidID == 1 && select){
                                video1.play();
                                // print video size
                                console.log(video1.videoWidth, video1.videoHeight);
                                video0.hidden = true;
                                video1.hidden = false;
                            }
                        });
                    </script> -->
                    
                    <div class="pill-row scene-pills-denoising" id="scene-pills-denoising">
                        <span class="pill scene-pill-denoising active" data-value="022" onclick="selectCompVideoDenoising(activeMethodPillDenoising, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/022_thumbnail.jpg" alt="DTU/scan31" width="64">
                        </span>
                        <span class="pill scene-pill-denoising" data-value="026" onclick="selectCompVideoDenoising(activeMethodPillDenoising, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/026_thumbnail.jpg" alt="DTU/scan45" width="64">
                        </span>
                        <span class="pill scene-pill-denoising" data-value="027" onclick="selectCompVideoDenoising(activeMethodPillDenoising, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/027_thumbnail.jpg" alt="LLFF/fern" width="64">
                        </span>
                        <span class="pill scene-pill-denoising" data-value="024" onclick="selectCompVideoDenoising(activeMethodPillDenoising, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/024_thumbnail.jpg" alt="LLFF/horns" width="64">
                        </span>
                        <span class="pill scene-pill-denoising" data-value="009" onclick="selectCompVideoDenoising(activeMethodPillDenoising, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/009_thumbnail.jpg" alt="Re10K/sofa" width="64">
                        </span>
                        <span class="pill scene-pill-denoising" data-value="006" onclick="selectCompVideoDenoising(activeMethodPillDenoising, this, 3)">
                            <img class="thumbnail-img" src="thumbnails/006_thumbnail.jpg" alt="Re10K/living room" width="64">
                        </span>
                        <span class="pill scene-pill-denoising" data-value="014" onclick="selectCompVideoDenoising(activeMethodPillDenoising, this, 6)">
                            <img class="thumbnail-img" src="thumbnails/014_thumbnail.jpg" alt="CO3D/bench" width="64">
                        </span>
                        <span class="pill scene-pill-denoising" data-value="000" onclick="selectCompVideoDenoising(activeMethodPillDenoising, this, 6)">
                            <img class="thumbnail-img" src="thumbnails/000_thumbnail.jpg" alt="CO3D/plant" width="64">
                        </span>
                    </div>

                    <script>
                        activeMethodPillDenoising = document.querySelector('.method-pill-denoising.active-pill');
                        activeScenePillDenoising = document.querySelector('.scene-pill-denoising.active-pill');
                        activeModePillDenoising = document.querySelector('.mode-pill-denoising.active-pill');
                    </script>
                </div>
            </div>
        </div>
        <br>






        
        
        <br>

        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
				  ReconFusion improves both few-view and many-view reconstruction
                </h3><br>
                <!-- <p class="text-justify" style="color:red">
                    Hover over the plot to show rendered video under different number of views.
                </p> -->
                
                <!-- top down layout -->
                <canvas id="sparsityChart" style="max-height: 300px; max-width: 500px; margin: auto;"></canvas>
                <script src="js/sparsity_chart.js"></script>
                <br>
                <p class="text-center">
                    Our diffusion prior improves performance over baseline Zip-NeRF in both the few-view and many-view sampling regimes.
                </p>
    
                <div class="text-center">
                    <div class="video-compare-container" id="materialsDiv">
                        <video class="video" id="sparsity" loop playsinline autoPlay muted src="videos/sparsity/stacked_vid.mp4" onplay="resizeAndPlay(this)"></video>
                        <canvas height=0 class="videoMerge" id="sparsityMerge"></canvas>
                    </div>
                    <!-- <canvas height=0 class="videoWrapper" id="sparsityVideoWrapper"></canvas> -->
			<em>Move the slider to adjust the number of views. The left column shows the nearest input view.</em>
                    <div class="slider-container" style="padding-left: 12%; padding-right: 11%;">
                        <input type="range" class="styled-slider" id="sparsitySlider" min="0" max="6" step="1" value="0" list="slider-labels">
                        <datalist id="slider-labels">
                            <option value="0">3</option>
                            <option value="1">6</option>
                            <option value="2">9</option>
                            <option value="3">18</option>
                            <option value="4">27</option>
                            <option value="5">54</option>
                            <option value="6">81</option>
                        </datalist>
                    </div>
                    <table style="text-align: left; padding-left: 0px; padding-right: 10%; width: 100%;">
                        <tr>
                            <th width="10%"></th>
                            <td width="10%">3</td>
                            <td width="10%">6</td>
                            <td width="10%">9</td>
                            <td width="10%">18</td>
                            <td width="10%">27</td>
                            <td width="10%">54</td>
                            <td width="10%">81</td>
                        </tr>
                    </table><br>
                    <!-- <div class="text-center">
                        Rendered video under <span id="sparsityValue" style="color: red;">3</span> views
                    </div> -->
                </div>
                
                <!-- left right layout -->
                <!-- <table style="width: 100%; border-collapse: collapse;">
                    <tr>
                      <td style="text-align: center;" >
                        <canvas id="sparsityChart" style="max-height: 250px; max-width: 200px; margin: auto;"></canvas>
                        <script src="js/sparsity_chart.js"></script>
                      </td>
                      <td style="text-align: center;">
                        <video class="video" width=100% id="sparsityVideo" loop playsinline autoplay muted onplay="playOnCanvas(this, 180)">
                            <source src="videos/sparsity/kitchenlego_3.mp4" type="video/mp4" />
                        </video>
                        <canvas height=0 class="videoWrapper" id="sparsityVideoWrapper"></canvas>
                      </td>
                    </tr>
                    <tr>
                      <td style="text-align: center;"></td>
                      <td style="text-align: center;">Rendered video under <span id="sparsityValue" style="color: red;">3</span> views</td>
                    </tr>
                </table> -->
<br>
            </div>
        </div><br><br>

        <div class="row">
            <div class="col-md-8 col-md-offset-2 text-center">
                <h3>
                    ReconFusion distills a consistent 3D model from inconsistent samples
                </h3><br>
                
                <table style="margin-left: auto; margin-right: auto; width: 90%;">
                    <tr>
                      <th style="width: 4%;"></th>
                      <th style="text-align: center;width: 32%;">LLFF (3 views)</th>
                      <th style="text-align: center;width: 32%;">CO3D (6 views)</th>
					  <th style="text-align: center;width: 32%;">mip-NeRF 360 (9 views)</th>
                    </tr>
                    <tr>
                      <td style="text-align: center; writing-mode: vertical-lr; transform: rotate(180deg); width:4%">3D Reconstruction</td>
                      <td rowspan="2" colspan="3" style="width: 96%">
                        <video class="video" width=100% loop playsinline autoplay muted controls>
                            <source src="videos/ablation/recon_vs_samples.mp4" />
                        </video>
                      </td>
                      <!-- <td style="text-align: center;">
                        <video class="video" width=100% loop playsinline autoplay muted style="max-height: 150px;">
                            <source src="videos/ablation/z123_nerf.mp4" />
                        </video>
                      </td>
                      <td style="text-align: center;">
                        <video class="video" width=100% loop playsinline autoplay muted style="max-height: 150px;">
                            <source src="videos/ablation/scratch_nerf.mp4" />
                        </video>
                      </td>
                      <td style="text-align: center;">
                        <video class="video" width=100% loop playsinline autoplay muted style="max-height: 150px;">
                            <source src="videos/ablation/ours_nerf.mp4" />
                        </video>
                      </td> -->
                    </tr>
                    <tr>
					  <td style="text-align: center; writing-mode: vertical-lr; transform: rotate(180deg); width:4%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Samples&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td></td>
                      <!-- <td style="text-align: center;">
                        <video class="video" width=100% loop playsinline autoplay muted style="max-height: 150px;">
                            <source src="videos/ablation/z123_samples.mp4" />
                        </video>
                      </td>
                      <td style="text-align: center;">
                        <video class="video" width=100% loop playsinline autoplay muted style="max-height: 150px;">
                            <source src="videos/ablation/scratch_samples.mp4" />
                        </video>
                      </td>
                      <td style="text-align: center;">
                        <video class="video" width=100% loop playsinline autoplay muted style="max-height: 150px;">
                            <source src="videos/ablation/ours_samples.mp4" />
                        </video>
                      </td> -->
                    </tr>
                </table>
                <br>
<!-- 
                <p class="text-justify" style="width: 85%; margin: auto;"> -->
                <p class="text-justify" style="width:85%; margin:auto">
                    ReconFusion recovers consistent 3D reconstructions (top) from a diffusion model that produces image samples independently for each viewpoint (bottom). These samples are not multiview consistent, but can produce high-quality 3D reconstructions when used as a prior in optimization.
                </p>
            </div>
        </div>
        <br>
        <br>

        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    Video
                </h3>
                <div class="text-center">
                    <div style="position:relative;padding-top:56.25%;">
                        <iframe src="https://youtube.com/embed/xrrhynRzC8k" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;"></iframe>
                    </div>
                </div>
            </div>
        </div>
<br>
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    Multisampling
                </h3>
				<table style="width: 100%; border-collapse: collapse;">
				  <tr>
				    <td style="text-align: center;">
		                <video id="v0" width="100%" autoplay loop muted>
		                  <source src="img/hexify_train.mp4" type="video/mp4" />
		                </video>
					</td>
				    <td style="text-align: center;">
		                <video id="v0" width="100%" autoplay loop muted>
		                  <source src="img/hexify_test.mp4" type="video/mp4" />
		                </video>
					</td>
				  </tr>
				  <tr>
				    <td style="text-align: center;">When Training</td>
				    <td style="text-align: center;">When Rendering</td>
				  </tr>
				</table>
                <p class="text-justify">
                    We use multisampling to approximate the average NGP feature over a conical frustum, by constructing a 6-sample pattern that exactly matches the frustum's first and second moments. When training, we randomly rotate and flip (along the ray axis) each pattern, and when rendering we deterministically flip and rotate each adjacent pattern by 30 degrees.
                </p>
            </div>
        </div>
<br>
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    XY aliasing
                </h3>
                <video class="video" width=100% id="xyalias" loop playsinline autoplay muted src="img/xy_alias_swipe_crf27.mp4" onplay="resizeAndPlay(this)"></video>
                <canvas height=0 class="videoMerge" id="xyaliasMerge"></canvas>
                <p class="text-justify">
                    A naive baseline (left) combining mip-NeRF 360 and Instant NGP results in aliasing as the camera moves laterally. Our full method (right) produces prefiltered renderings that do not flicker or shimmer.
                </p>
            </div>
        </div>
           
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    Z aliasing
                </h3>
                <video id="v0" width="100%" autoplay loop muted>
                  <source src="img/z_alias_pdf_labeled.m4v" type="video/mp4" />
                </video>
                <p class="text-justify">
                    The proposal network used for resampling points along rays in mip-NeRF 360 results in an artifact we refer to as <em>z-aliasing</em>, where foreground content alternately appears and disappears as the camera moves toward or away from scene content. Z-aliasing occurs when the initial set of samples from the proposal network is not dense enough and misses thin structures, such as the chair above. Missed content can not be recovered by later rounds of sampling, since no future samples will be placed at that location along the ray. Our improvements to proposal network supervision result in a prefiltered proposal output that preserves the foreground object for all frames in this sequence. The plots above depict samples along a ray for three rounds of resampling (blue, orange, and green lines), with the y axis showing rendering weight (how much each interval contributes to the final rendered color), as a normalized probability density.
                </p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    Citation
                </h3>
                <div class="form-group col-md-10 col-md-offset-1">
                    <textarea id="bibtex" class="form-control" readonly>
@article{chen2024narcan,
    title={NaRCan: Natural Refined Canonical Image with 
           Integration of Diffusion Prior for Video Editing},
    author={Ting-Hsuan Chen and Jiewen Chan and Shih Han Yen and 
            Hau-Shiang Shiu and Changhan Yeh and Yu-Lun Liu},
    journal={arXiv},
    year={2024}
}</textarea>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h3>
                    Acknowledgements
                </h3>
                <p class="text-justify">
                This research was funded by the National Science and Technology Council, Taiwan, under Grants NSTC 112-2222-E-A49-004-MY2. The authors are grateful to Google, NVIDIA, and MediaTek Inc. for generous donations. Yu-Lun Liu acknowledges the Yushan Young Fellow Program by the MOE in Taiwan.
                    <br><br>
                The website template was borrowed from <a href="http://mgharbi.com/">Michaël Gharbi</a> and <a href="https://dorverbin.github.io/refnerf">Ref-NeRF</a>.
                </p>
            </div>
        </div>
    </div>
</body>
</html>
